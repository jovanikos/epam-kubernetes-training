apiVersion: v1
kind: ConfigMap
metadata:
  name: resources-ms-config
  namespace: dev
data:
  RESOURCES_MS_NAME: "resources-ms"
  RESOURCES_MS_PORT: "8080"
  RESOURCES_DB_URL: "resources-db"
  RESOURCES_DB_PORT: "5433"
  SONGS_MS_URL: "songs-ms"

  resources-init.sql: |
    DROP TABLE IF EXISTS resources CASCADE;
    CREATE TABLE resources (
      id SERIAL NOT NULL,
      blob BYTEA,
      PRIMARY KEY (id)
    );
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: songs-ms-config
  namespace: dev
data:
  SONGS_MS_NAME: "songs-ms"
  SONGS_MS_PORT: "8081"
  SONGS_DB_URL: "songs-db"
  SONGS_DB_PORT: "5432"

  songs-init.sql: |
    DROP TABLE IF EXISTS songs CASCADE;
    DROP SEQUENCE IF EXISTS songs_seq;
    CREATE SEQUENCE songs_seq START WITH 1 INCREMENT BY 50;
    CREATE TABLE songs (
      id INTEGER NOT NULL,
      resource_id INTEGER NOT NULL UNIQUE,
      album VARCHAR(255),
      artist VARCHAR(255),
      length VARCHAR(255),
      name VARCHAR(255),
      year VARCHAR(255),
      PRIMARY KEY (id)
    );
  
